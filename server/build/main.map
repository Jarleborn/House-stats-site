{"version":3,"sources":["webpack:///webpack/bootstrap ac93da079ff5364bd29d","webpack:///external \"express\"","webpack:///./src/modules/socketControl.js","webpack:///./src/modules/JSONreader.js","webpack:///./src/api/db-ish.json","webpack:///./src/index.js","webpack:///external \"cors\"","webpack:///external \"http\"","webpack:///external \"socket.io\"","webpack:///./src/router/houseRouter.js","webpack:///external \"body-parser\"","webpack:///./src/modules/extras/JSONwriter.js"],"names":["io","require","on","socket","getAllHouses","then","emit","houses","res","catch","console","log","err","dbData","getSpecificHouse","id","Promise","resolve","reject","i","length","Object","keys","cors","express","app","server","Server","listen","use","static","__dirname","attach","houseRouter","Router","bodyParser","jsonParser","json","get","req","params","send","response","patch","addHouse","body","end","addRoom","newHouse","push","houseId","newRoom","rooms"],"mappings":";;;AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;AC7DA,oC;;;;;;;ACAA;AAAA,IAAMA,KAAK,mBAAAC,CAAQ,CAAR,GAAX;;AAEA;;AAEAD,GAAGE,EAAH,CAAM,YAAN,EAAoB,UAAUC,MAAV,EAAiB;AACnCC,EAAA,yEAAAA,GACCC,IADD,CACM,eAAM;AACVF,WAAOG,IAAP,CAAY,WAAZ,EAAwB,EAACC,QAAQC,GAAT,EAAxB;AACD,GAHD,EAICC,KAJD,CAIO,eAAO;AACZC,YAAQC,GAAR,CAAYC,GAAZ;AACD,GAND;AAOD,CARD;;AAUA,yDAAeZ,EAAf,E;;;;;;;;ACdA;AAAA,IAAMa,SAAS,mBAAAZ,CAAQ,CAAR,CAAf;;AAGA,SAASa,gBAAT,CAA0BC,EAA1B,EAA8B;AAC5B,SAAO,IAAIC,OAAJ,CAAY,UAASC,OAAT,EAAkBC,MAAlB,EAA0B;AAC3C,SAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAIN,OAAON,MAAP,CAAca,MAAlC,EAA0CD,GAA1C,EAA+C;AAC7C,UAAKE,OAAOC,IAAP,CAAYT,OAAON,MAAP,CAAcY,CAAd,CAAZ,EAA8B,CAA9B,MAAqCJ,EAA1C,EAA8C;AAC5CE,gBAAQJ,OAAON,MAAP,CAAcY,CAAd,CAAR;AACD;AACF;AACDD,WAAO,2BAAP;AACD,GAPM,CAAP;AAQD;;AAED,SAASd,YAAT,GAAwB;AACtB,SAAO,IAAIY,OAAJ,CAAY,UAASC,OAAT,EAAkBC,MAAlB,EAA0B;AAC3C,QAAGL,MAAH,EAAU;AACRI,cAAQJ,OAAON,MAAf;AACD;AACDW,WAAO,0BAAP;AACD,GALM,CAAP;AAMD;;;;;;;;ACrBD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,E;;;;;;;;;;;;;;;;AC/LA;AAAAR,QAAQC,GAAR,CAAY,aAAZ;AACA,IAAMY,OAAO,mBAAAtB,CAAQ,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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap ac93da079ff5364bd29d","module.exports = require(\"express\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express\"\n// module id = 0\n// module chunks = 0","const io = require('socket.io')()\n\nimport {getAllHouses} from './JSONreader'\n\nio.on('connection', function (socket){\n  getAllHouses()\n  .then(res =>{\n    socket.emit('initHouse',{houses: res})\n  })\n  .catch(err => {\n    console.log(err)\n  })\n})\n\nexport default io\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/socketControl.js","const dbData = require('../api/db-ish.json')\n\n\nfunction getSpecificHouse(id) {\n  return new Promise(function(resolve, reject) {\n    for (var i = 0; i < dbData.houses.length; i++) {\n      if ( Object.keys(dbData.houses[i])[0] === id) {\n        resolve(dbData.houses[i])\n      }\n    }\n    reject('sorry could not find that')\n  })\n}\n\nfunction getAllHouses() {\n  return new Promise(function(resolve, reject) {\n    if(dbData){\n      resolve(dbData.houses)\n    }\n    reject('sorry the db seems empty')\n  })\n}\n\n\n\nexport {getSpecificHouse, getAllHouses}\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/JSONreader.js","module.exports = {\n\t\"houses\": [\n\t\t{\n\t\t\t\"house1\": {\n\t\t\t\t\"adress\": \"hejvägen 1\",\n\t\t\t\t\"rooms\": [\n\t\t\t\t\t{\n\t\t\t\t\t\t\"name\": \"Vardagsrum\",\n\t\t\t\t\t\t\"temperature\": 21,\n\t\t\t\t\t\t\"humidity\": 0.5\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"name\": \"Farstun\",\n\t\t\t\t\t\t\"temperature\": -3,\n\t\t\t\t\t\t\"humidity\": 95\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"name\": \"Köket\",\n\t\t\t\t\t\t\"temperature\": 23,\n\t\t\t\t\t\t\"humidity\": 0.5\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"name\": \"Toa1\",\n\t\t\t\t\t\t\"temperature\": 30,\n\t\t\t\t\t\t\"humidity\": 0.6\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"name\": \"Toa2\",\n\t\t\t\t\t\t\"temperature\": 25,\n\t\t\t\t\t\t\"humidity\": 0.7\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"name\": \"Sovrum1\",\n\t\t\t\t\t\t\"temperature\": 19,\n\t\t\t\t\t\t\"humidity\": 0.4\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"name\": \"Sovrum2\",\n\t\t\t\t\t\t\"temperature\": 17,\n\t\t\t\t\t\t\"humidity\": 0.5\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"name\": \"Garage\",\n\t\t\t\t\t\t\"temperature\": 2,\n\t\t\t\t\t\t\"humidity\": 91\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"house2\": {\n\t\t\t\t\"adress\": \"hejvägen 14\",\n\t\t\t\t\"rooms\": [\n\t\t\t\t\t{\n\t\t\t\t\t\t\"name\": \"Vardagsrum\",\n\t\t\t\t\t\t\"temperature\": 21,\n\t\t\t\t\t\t\"humidity\": 0.5\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"name\": \"Farstun\",\n\t\t\t\t\t\t\"temperature\": -3,\n\t\t\t\t\t\t\"humidity\": 95\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"name\": \"Köket\",\n\t\t\t\t\t\t\"temperature\": 23,\n\t\t\t\t\t\t\"humidity\": 0.5\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"name\": \"Toa1\",\n\t\t\t\t\t\t\"temperature\": 30,\n\t\t\t\t\t\t\"humidity\": 0.6\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"name\": \"Toa2\",\n\t\t\t\t\t\t\"temperature\": 25,\n\t\t\t\t\t\t\"humidity\": 0.7\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"name\": \"Sovrum1\",\n\t\t\t\t\t\t\"temperature\": 19,\n\t\t\t\t\t\t\"humidity\": 0.4\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"name\": \"Sovrum2\",\n\t\t\t\t\t\t\"temperature\": 17,\n\t\t\t\t\t\t\"humidity\": 0.5\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"name\": \"Garage\",\n\t\t\t\t\t\t\"temperature\": 2,\n\t\t\t\t\t\t\"humidity\": 92\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"house3\": {\n\t\t\t\t\"adress\": \"hejvägen 13\",\n\t\t\t\t\"rooms\": [\n\t\t\t\t\t{\n\t\t\t\t\t\t\"name\": \"Vardagsrum\",\n\t\t\t\t\t\t\"temperature\": 21,\n\t\t\t\t\t\t\"humidity\": 0.5\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"name\": \"Farstun\",\n\t\t\t\t\t\t\"temperature\": -3,\n\t\t\t\t\t\t\"humidity\": 95\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"name\": \"Köket\",\n\t\t\t\t\t\t\"temperature\": 23,\n\t\t\t\t\t\t\"humidity\": 0.5\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"name\": \"Toa1\",\n\t\t\t\t\t\t\"temperature\": 30,\n\t\t\t\t\t\t\"humidity\": 0.6\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"name\": \"Toa2\",\n\t\t\t\t\t\t\"temperature\": 25,\n\t\t\t\t\t\t\"humidity\": 0.7\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"name\": \"Sovrum1\",\n\t\t\t\t\t\t\"temperature\": 19,\n\t\t\t\t\t\t\"humidity\": 0.4\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"name\": \"Sovrum2\",\n\t\t\t\t\t\t\"temperature\": 17,\n\t\t\t\t\t\t\"humidity\": 0.5\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"name\": \"Garage\",\n\t\t\t\t\t\t\"temperature\": 2,\n\t\t\t\t\t\t\"humidity\": 93\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"house4\": {\n\t\t\t\t\"adress\": \"hejvägen 12\",\n\t\t\t\t\"rooms\": [\n\t\t\t\t\t{\n\t\t\t\t\t\t\"name\": \"Vardagsrum\",\n\t\t\t\t\t\t\"temperature\": 21,\n\t\t\t\t\t\t\"humidity\": 0.5\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"name\": \"Farstun\",\n\t\t\t\t\t\t\"temperature\": -3,\n\t\t\t\t\t\t\"humidity\": 95\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"name\": \"Köket\",\n\t\t\t\t\t\t\"temperature\": 23,\n\t\t\t\t\t\t\"humidity\": 0.5\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"name\": \"Toa1\",\n\t\t\t\t\t\t\"temperature\": 30,\n\t\t\t\t\t\t\"humidity\": 0.6\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"name\": \"Toa2\",\n\t\t\t\t\t\t\"temperature\": 25,\n\t\t\t\t\t\t\"humidity\": 0.7\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"name\": \"Sovrum1\",\n\t\t\t\t\t\t\"temperature\": 19,\n\t\t\t\t\t\t\"humidity\": 0.4\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"name\": \"Sovrum2\",\n\t\t\t\t\t\t\"temperature\": 17,\n\t\t\t\t\t\t\"humidity\": 0.5\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"name\": \"Garage\",\n\t\t\t\t\t\t\"temperature\": 2,\n\t\t\t\t\t\t\"humidity\": 94\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t}\n\t\t}\n\t]\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/api/db-ish.json\n// module id = 3\n// module chunks = 0","console.log('Hello World')\nconst cors = require('cors')\nconst express = require('express')\nconst app = require('express')()\nconst server = require('http').Server(app)\nimport io from './modules/socketControl'\n\nimport houseRouter from './router/houseRouter'\n\nserver.listen(1337)\n\napp.use(express.static(__dirname + '/public'))\napp.use(cors())\n\napp.use('/house',houseRouter)\n\nio.attach(server)\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","module.exports = require(\"cors\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"cors\"\n// module id = 6\n// module chunks = 0","module.exports = require(\"http\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"http\"\n// module id = 7\n// module chunks = 0","module.exports = require(\"socket.io\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"socket.io\"\n// module id = 8\n// module chunks = 0","const express = require('express')\nconst houseRouter = express.Router()\nconst bodyParser = require('body-parser')\nconst jsonParser = bodyParser.json()\nimport io from '../modules/socketControl'\nimport {getSpecificHouse, getAllHouses} from '../modules/JSONreader'\nimport {addHouse, addRoom} from '../modules/extras/JSONwriter'\n\nhouseRouter.get('/:id', function (req, res) {\n  getSpecificHouse(req.params.id)\n  .then(response =>{\n    res.send(response)\n  })\n  .catch(err => {\n    res.send(err)\n  })\n})\n\nhouseRouter.get('/', function (req, res) {\n  getAllHouses(req.params.id)\n  .then(response =>{\n    res.send(response)\n  })\n  .catch(err => {\n    res.send(err)\n  })\n})\n\nhouseRouter.patch('/',jsonParser, function (req, res) {\n  addHouse(req.body)\n  .then(res =>{\n    io.emit('added', res)\n  })\n  .catch(err => {\n  })\n  res.end()\n})\n\nhouseRouter.patch('/:id',jsonParser, function (req, res) {\n  addRoom(req.params.id, req.body)\n  .then(res =>{\n    io.emit('updated', res)\n  })\n  .catch(err => {\n  })\n  res.end()\n})\n\nexport default houseRouter\n\n\n\n// WEBPACK FOOTER //\n// ./src/router/houseRouter.js","module.exports = require(\"body-parser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"body-parser\"\n// module id = 10\n// module chunks = 0","const dbData = require('../../api/db-ish.json')\n\n//Test to add house\n//\n// curl -H \"Content-Type: application/json\" -X PATCH -d '{\"house5\": {\n//         \"adress\": \"testvägen 1\",\n//         \"rooms\": [\n//           { \"name\": \"Vardagsrum\", \"temperature\": 21, \"humidity\": 0.5 },\n//           { \"name\": \"Farstun\", \"temperature\": -3, \"humidity\": 95 },\n//           { \"name\": \"Köket\", \"temperature\": 23, \"humidity\": 0.5 },\n//           { \"name\": \"Toa1\", \"temperature\": 30, \"humidity\": 0.6 },\n//           { \"name\": \"Toa2\", \"temperature\": 25, \"humidity\": 0.7 },\n//           { \"name\": \"Sovrum1\", \"temperature\": 19, \"humidity\": 0.4 },\n//           { \"name\": \"Sovrum2\", \"temperature\": 17, \"humidity\": 0.5 },\n//           { \"name\": \"Garage\", \"temperature\": 2, \"humidity\": 94 }\n//         ]\n//       }}' http://localhost:1337/house/\n\nfunction addHouse(newHouse) {\n  return new Promise(function(resolve, reject) {\n    dbData.houses.push(newHouse)\n    resolve(dbData.houses)\n  })\n}\n\n\n//Test to add room\n//\n// curl -H \"Content-Type: application/json\" -X PATCH -d '{ \"name\": \"testrum\", \"temperature\": 21, \"humidity\": 0.5 }' http://localhost:1337/house/house1\nfunction addRoom(houseId, newRoom) {\n\n  return new Promise(function(resolve, reject) {\n\n    for (var i = 0; i < dbData.houses.length; i++) {\n      if ( Object.keys(dbData.houses[i])[0] === houseId) {\n        dbData.houses[i][houseId].rooms.push(newRoom)\n        console.log(dbData.houses[i][houseId].rooms)\n      }\n    }\n\n    resolve(dbData.houses)\n\n  })\n}\n\n\nexport {addHouse, addRoom}\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/extras/JSONwriter.js"],"sourceRoot":""}